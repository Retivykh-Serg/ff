<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>iFunnyFant</title>
		<meta name="description" content="Веселые фанты!" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
	</head>
	<body class="noselect">
		<div id="scores" style="display: none">
			<div>
				<p>Статистика игры <span class="glyphicon glyphicon-remove close" aria-label="X"></span></p>
				<table class="table table-striped table-condensed">
				    <thead><tr><th>Игрок</th><th>Очки</th></thead>
				    <tbody data-bind="foreach: sortGamers()">
				        <tr>
								  <td>
											<span data-bind="text: name"></span>
											<ul data-bind="foreach: status">
												<li data-bind="text: text"></li>
											</ul>
									</td>
									<td><b data-bind="text: wins"></b></td>
								</tr>
						</tbody>
				</table>
			</div>
		</div>

		<div id="main" class="color-main">
			<div id="aligner"  data-bind="css: alignerClass" class="aligner-gamers">
				<span id="players" data-bind="visible: step() != 'start'" style="display: none">
					 <span class="glyphicon glyphicon-user stats-icon" aria-label="stats"></span><br>
					<b data-bind="text: activeGamer().name"></b></span>

				<div id="task" data-bind="visible: step() == 'task', with: activeTask">
					<p id="fant-name" class="title" data-bind="text: name"></p>
					<p id="fant-text" class="text" data-bind="text: text"></p>
				</div>

				<div id="prepare" data-bind="visible: step() == 'wait'">
					<p class="text-prepare"  data-bind="text: greetingGamer, css: textClass"></p>
				</div>

				<div id="fail" data-bind="if: activeFail(), visible: step() == 'fail'">
					<p class="text-fail" data-bind="text:activeFail().text"></p>
				</div>

				<div id="win" data-bind="visible: step() == 'win'" style="display: none">
					<p class="text-win">Блестяще! Выбери, кто будет следующим!</p>
					<br><br>
					<div class="flex-container" data-bind="foreach: sortGamers">
						<div class="gamer-button" data-bind="click: $parent.goWait">
							<span data-bind="text: name"></span>
						</div>
					</div>
				</div>

			</div>
		</div>


		<div id="btn-wrapper" class="text">
			<div id="btn-add-gamer" data-bind="visible: step() == 'start'">Еще игрок</div>
			<div id="btn-start-game" data-bind="visible: step() == 'start'">Поехали!</div>
			<div id="btn-fail" data-bind="visible: step() == 'task', click: goFail" style="display: none">Провал</div>
			<div id="btn-win" data-bind="visible: step() == 'task', click: goWin" style="display: none">Успех</div>
			<div id="btn-user" data-bind="visible: step() == 'wait', css: colorClass, click: goTask" style="display: none">
				<span data-bind="text: 'Я - ' + activeGamer().name"></span>
			</div>
			<div id="btn-ok" data-bind="visible: step() == 'fail', click: goWait" style="display: none">Отработано!</div>
			<div id="btn-ok2" data-bind="visible: step() == 'win', click: goWait" style="display: none">Вы восхитительны!</div>
		</div>

		<script type="text/javascript" src="js/knockout.js"></script>
		<script type="text/javascript" src="js/jquery-1.12.0.min.js"></script>
		<script type="text/javascript" src="data.json"></script>
		<script type="text/javascript" src="js/script-knockout.js"></script>
	</body>
</html>
